# 介绍

## 关系型数据库
1. 采用关系模式组织（二维表格模型）
2. 只支持基本数据类型
3. 最大特点：事务一致性，支持ACID特性
4. 使用SQL操作数据库，可用于复杂查询
5. 支持安全性能很高的数据访问

## 非关系型数据库
1. 键值对存储数据
2. 支持文档数据、图片数据等
3. 一般不支持ACID，无事务机制，有锁机制
4. 无需经过SQL解析，读写性能很高
5. 可以处理灵活地业务数据

* 分布式数据库的三个核心指标CAP
    1. Consistency，一致性
    2. Availability，可用性（用户体验好）
    3. Partition Tolerance，分区容错性（分布式系统中，单个或多个节点宕机，系统仍然可以运作）
    * 关系型数据库满足CA
    * 大部分非关系型数据库满足AP，牺牲了部分一致性，只需满足BASE模型中的一部分
        * Basically Avaliable基本可用
        * Soft state软状态（状态可以有一段时间不同步）
        * Eventually consistency最终一致

## 关系型数据库优化
1. SQL优化
* 减少连接次数
* 采用视图
* Explain分析SQL的效率
2. 结构优化
* 表设计：采用范式验证
* **索引**（创建和维护需要开销）

## 非关系型数据库优化

## 总体
* 缓存
* 分表：将经常查询的数据分表
* 分库：将数据存放在不同的位置
* 集群情况下：主从同步，读写分离

## 数据库挂掉
* 写log

### 高并发访问数据库优化
1. 读写分离（master、slave数据库分别读写）
2. 分表分库存储
3. 缓存如Memcached，数据库修改后更新缓存
4. 将关系型数据库变为非关系型
5. 重要业务数据存储、不重要业务数据可临时存储

## 缓存
* 写流程：1）淘汰cache；2）再写db
* 读流程：1）读cache，如果数据命中hit则返回；2）如果数据未命中miss则读db；3）将db中读取出来的数据入缓存；